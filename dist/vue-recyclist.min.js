!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.VueRecyclist=e():t.VueRecyclist=e()}(this,function(){return function(t){function e(s){if(i[s])return i[s].exports;var n=i[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var i={};return e.m=t,e.c=i,e.d=function(t,i,s){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:s})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="./",e(e.s=1)}([function(t,e){t.exports=function(t,e,i,s,n,o){var r,l=t=t||{},a=typeof t.default;"object"!==a&&"function"!==a||(r=t,l=t.default);var c="function"==typeof l?l.options:l;e&&(c.render=e.render,c.staticRenderFns=e.staticRenderFns,c._compiled=!0),i&&(c.functional=!0),n&&(c._scopeId=n);var h;if(o?(h=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),s&&s.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(o)},c._ssrRegister=h):s&&(h=s),h){var u=c.functional,d=u?c.render:c.beforeCreate;u?(c._injectStyles=h,c.render=function(t,e){return h.call(e),d(t,e)}):c.beforeCreate=d?[].concat(d,h):[h]}return{esModule:r,exports:l,options:c}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i(2);e.default=s.a,"undefined"!=typeof window&&window.Vue&&window.Vue.component("vue-recyclist",s.a)},function(t,e,i){"use strict";function s(t){i(3),i(4)}var n=i(5),o=i(6),r=i(0),l=s,a=r(n.a,o.a,!1,l,"data-v-79cdd4d5",null);e.a=a.exports},function(t,e){},function(t,e){},function(t,e,i){"use strict";e.a={data:function(){return{name:"VueRecyclist",items:[],height:0,loadings:[],start:0,startOffset:0}},computed:{visibleItems:function(){return this.items.slice(Math.max(0,this.start-this.size),Math.min(this.items.length,this.start+this.size))},containerHeight:function(){return this.$el&&this.$el.offsetHeight||0},tombHeight:function(){return this.tombstone?this.$refs.tomb&&this.$refs.tomb.offsetHeight:0},loading:function(){return this.loadings.length}},props:{list:{type:Array,required:!0},tombstone:{type:Boolean,default:!1},size:{type:Number,default:20},offset:{type:Number,default:200},loadmore:{type:Function,required:!0},spinner:{type:Boolean,default:!0},nomore:{type:Boolean,default:!1}},watch:{list:function(t){t.length?(this.loadings.pop(),this.loading||this.loadItems()):this.init()},items:function(t){t.length>this.list.length&&this.getItems()}},mounted:function(){this.$el.addEventListener("scroll",this.onScroll.bind(this)),window.addEventListener("resize",this.onResize.bind(this)),this.init()},methods:{init:function(){this.reset(),this.load()},reset:function(){this.items=[],this.height=this.top=this.start=0,this.$el.scrollTop=0},load:function(){this.tombstone?(this.items.length+=this.size,this.loadItems()):this.loading||this.getItems()},getItems:function(){this.loadings.push(1),this.loadmore()},loadItems:function(){for(var t=this,e=[],i=this.tombstone?this.items.length:this.list.length,s=0;s<i;s++){(function(i){if(t.items[i]&&t.items[i].loaded)return"continue";t.setItem(i,t.list[i]||null),e.push(t.$nextTick().then(function(){t.updateItemHeight(i)}))})(s)}Promise.all(e).then(function(){t.updateItemTop()})},setItem:function(t,e){this.$set(this.items,t,{data:e||{},height:0,top:-1e3,tomb:!e,loaded:!!e})},updateItemHeight:function(t){var e=this.items[t],i=this.$refs["item"+t];i&&i[0]?e.height=i[0].offsetHeight:e.height=this.tombHeight},updateItemTop:function(){this.height=0;for(var t=0;t<this.items.length;t++){var e=this.items[t-1];this.items[t].top=e?e.top+e.height:0,this.height+=this.items[t].height}this.startOffset&&this.setScrollTop(),this.updateIndex(),this.makeScrollable()},updateIndex:function(){for(var t=this.$el.scrollTop,e=0;e<this.items.length;e++)if(this.items[e].top>t){this.start=Math.max(0,e-1);break}},getStartItemOffset:function(){this.items[this.start]&&(this.startOffset=this.items[this.start].top-this.$el.scrollTop)},setScrollTop:function(){this.items[this.start]&&(this.$el.scrollTop=this.items[this.start].top-this.startOffset,this.startOffset=0)},makeScrollable:function(){this.$el.classList.add("vue-recyclist-scrollable")},onScroll:function(){this.$el.scrollTop+this.$el.offsetHeight>this.height-this.offset&&this.load(),this.updateIndex()},onResize:function(){this.getStartItemOffset(),this.items.forEach(function(t){t.loaded=!1}),this.loadItems()}},destroyed:function(){this.$el.removeEventListener("scroll",this.onScroll.bind(this)),window.removeEventListener("resize",this.onResize.bind(this))}}},function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"vue-recyclist"},[i("div",{ref:"list",staticClass:"vue-recyclist-items",style:{height:t.height+"px"}},[t._l(t.visibleItems,function(e,s){return i("div",{staticClass:"vue-recyclist-item",style:{transform:"translate3d(0,"+e.top+"px,0)"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.tombstone,expression:"tombstone"}],class:{"vue-recyclist-transition":t.tombstone},style:{opacity:+!e.loaded}},[t._t("tombstone")],2),t._v(" "),i("div",{class:{"vue-recyclist-transition":t.tombstone},style:{opacity:+e.loaded}},[t._t("item",null,{data:e.data,index:s})],2)])}),t._v(" "),i("div",{staticClass:"vue-recyclist-pool"},[t._l(t.items,function(e,s){return e.tomb||e.height?t._e():i("div",{ref:"item"+s,refInFor:!0,staticClass:"vue-recyclist-item vue-recyclist-invisible"},[t._t("item",null,{data:e.data})],2)}),t._v(" "),i("div",{ref:"tomb",staticClass:"vue-recyclist-item vue-recyclist-invisible"},[t._t("tombstone")],2)],2)],2),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.spinner&&!t.nomore&&!t.tombstone,expression:"spinner && !nomore && !tombstone"}],staticClass:"vue-recyclist-loading",style:{visibility:t.loading?"visible":"hidden"}},[t._t("spinner",[t._m(0)])],2),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.nomore&&!t.loading,expression:"nomore && !loading"}],staticClass:"vue-recyclist-nomore"},[t._t("nomore",[i("div",[t._v("End of list")])])],2)])},n=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"vue-recyclist-loading-content"},[i("div",{staticClass:"cssloading-circle spinner"})])}],o={render:s,staticRenderFns:n};e.a=o}])});
//# sourceMappingURL=vue-recyclist.min.js.map